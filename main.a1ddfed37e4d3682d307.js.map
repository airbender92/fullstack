{"version":3,"file":"main.a1ddfed37e4d3682d307.js","mappings":"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","sources":["webpack://client/./src/hooks/useAuth.ts","webpack://client/./src/layout/SecurityLayout.tsx","webpack://client/./src/stores/useStore.ts","webpack://client/./src/layout/MobxLayout.tsx","webpack://client/./src/layout/BasicLayout.tsx","webpack://client/./src/pages/Login/index.tsx","webpack://client/./src/components/App.tsx","webpack://client/./src/index.tsx","webpack://client/./src/stores/RootStore.ts","webpack://client/./src/stores/Page1.store.ts","webpack://client/./src/utils/request.ts","webpack://client/./src/stores/Login.store.ts","webpack://client/./src/service/login.ts","webpack://client/./src/stores/ sync \\.store\\.(ts%7Cjs)$"],"sourcesContent":["// client/src/hooks/useAuth.ts\nimport { useState, useEffect } from 'react';\nconst useAuth = () => {\n    const [authState, setAuthState] = useState({\n        isAuthenticated: false,\n        isLoading: true, // 添加加载状态\n    });\n    useEffect(() => {\n        // 模拟验证逻辑，这里可以替换为实际的 API 请求\n        const token = localStorage.getItem('token');\n        // 简单验证：如果存在 token 就认为已认证\n        // 实际应用中应该验证 token 的有效性（例如，检查过期时间）\n        const isValidToken = token !== null;\n        setAuthState({\n            isAuthenticated: isValidToken,\n            isLoading: false,\n        });\n    }, []);\n    return authState;\n};\nexport default useAuth;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\n// client/src/layout/SecurityLayout.tsx\nimport { useEffect } from 'react';\nimport { Layout } from 'antd';\nimport useAuth from '@/hooks/useAuth';\nimport { useNavigate, useLocation, Outlet } from 'react-router-dom';\nconst { Content } = Layout;\nconst SecurityLayout = ({ children }) => {\n    const { isAuthenticated, isLoading } = useAuth();\n    const navigate = useNavigate();\n    const location = useLocation();\n    // 只有在认证状态确定且未认证时才重定向\n    useEffect(() => {\n        if (!isLoading && !isAuthenticated && location.pathname !== '/login') {\n            navigate('/login');\n        }\n    }, [isAuthenticated, isLoading, location.pathname, navigate]);\n    // 加载过程中可以显示一个加载状态\n    if (isLoading) {\n        return _jsx(\"div\", { children: \"\\u9A8C\\u8BC1\\u8EAB\\u4EFD\\u4E2D...\" });\n    }\n    if (!isAuthenticated) {\n        return null;\n    }\n    console.log('children', children);\n    return (_jsx(Layout, { children: _jsx(Content, { children: isAuthenticated ? _jsx(Outlet, {}) : null }) }));\n};\nexport default SecurityLayout;\n","import { createContext, useContext } from 'react';\nconst StoreContext = createContext(null);\nexport const StoreProvider = StoreContext.Provider;\nexport const useStore = () => {\n    const store = useContext(StoreContext);\n    if (!store) {\n        throw new Error('useStore must be used within a StoreProvider');\n    }\n    return store;\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Layout } from 'antd';\nimport { observer } from 'mobx-react';\nimport { Outlet } from 'react-router-dom';\nimport { useStore } from '@/stores/useStore'; // 假设这里有一个自定义的 Mobx 存储钩子\nconst { Content } = Layout;\nconst MobxLayout = observer(({ children }) => {\n    const store = useStore();\n    return (_jsx(Layout, { children: _jsxs(Content, { children: [\" \", _jsx(Outlet, {})] }) }));\n});\nexport default MobxLayout;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Layout, Menu } from 'antd';\nimport { Link, Outlet } from 'react-router-dom';\nimport { HomeOutlined, UserOutlined } from '@ant-design/icons';\nconst { Header, Content, Footer } = Layout;\nconst BasicLayout = ({ children }) => {\n    return (_jsxs(Layout, { className: \"layout\", children: [_jsxs(Header, { children: [_jsx(\"div\", { className: \"logo\" }), _jsxs(Menu, { theme: \"dark\", mode: \"horizontal\", children: [_jsx(Menu.Item, { icon: _jsx(HomeOutlined, {}), children: _jsx(Link, { to: \"/\", children: \"\\u9996\\u9875\" }) }, \"1\"), _jsx(Menu.Item, { icon: _jsx(UserOutlined, {}), children: _jsx(Link, { to: \"/profile\", children: \"\\u4E2A\\u4EBA\\u4E2D\\u5FC3\" }) }, \"2\")] })] }), _jsx(Content, { style: { padding: '0 50px' }, children: _jsx(\"div\", { className: \"site-layout-content\", children: _jsx(Outlet, {}) }) }), _jsx(Footer, { style: { textAlign: 'center' }, children: \"Ant Design \\u00A92024 Created by Ant UED\" })] }));\n};\nexport default BasicLayout;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Form, Input, Button, message } from 'antd';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport { useStore } from '@/stores/useStore';\nconst Login = () => {\n    const store = useStore();\n    const { isLoggedIn, login, error } = store.LoginStore;\n    const onFinish = async (values) => {\n        // 这里可以添加实际的登录逻辑，例如发送请求到后端验证用户名和密码\n        console.log('Received values of form: ', values);\n        await login(values.username, values.password);\n        if (isLoggedIn) {\n            message.success('登录成功');\n            window.location.href = '/';\n        }\n        else {\n            message.error(error || '登录失败，请检查用户名和密码');\n        }\n    };\n    return (_jsxs(Form, { name: \"login\", initialValues: { remember: true }, onFinish: onFinish, style: { maxWidth: 300, margin: '0 auto', paddingTop: '100px' }, children: [_jsx(Form.Item, { name: \"username\", rules: [{ required: true, message: '请输入用户名!' }], children: _jsx(Input, { prefix: _jsx(UserOutlined, { className: \"site-form-item-icon\" }), placeholder: \"\\u7528\\u6237\\u540D\" }) }), _jsx(Form.Item, { name: \"password\", rules: [{ required: true, message: '请输入密码!' }], children: _jsx(Input, { prefix: _jsx(LockOutlined, { className: \"site-form-item-icon\" }), type: \"password\", placeholder: \"\\u5BC6\\u7801\" }) }), _jsx(Form.Item, { children: _jsx(Button, { type: \"primary\", htmlType: \"submit\", style: { width: '100%' }, children: \"\\u767B\\u5F55\" }) })] }));\n};\nexport default Login;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n// client/src/components/App.tsx\nimport React from 'react';\nimport { Button } from 'antd';\nimport { UserOutlined } from '@ant-design/icons';\nimport '@/styles/global.less';\nimport SecurityLayout from '@/layout/SecurityLayout';\nimport MobxLayout from '@/layout/MobxLayout';\nimport BasicLayout from '@/layout/BasicLayout';\nimport { HashRouter as Router, Routes, Route } from 'react-router-dom';\nimport Login from '@/pages/Login';\nconst App = () => {\n    const [count, setCount] = React.useState(0);\n    const increment = () => {\n        setCount(prev => prev + 1);\n    };\n    return (_jsx(Router, { children: _jsxs(Routes, { children: [_jsx(Route, { path: \"/login\", element: _jsx(Login, {}) }), _jsx(Route, { element: _jsx(SecurityLayout, {}), children: _jsx(Route, { element: _jsx(MobxLayout, {}), children: _jsx(Route, { element: _jsx(BasicLayout, {}), children: _jsx(Route, { path: \"/\", element: _jsxs(\"div\", { className: \"app-container\", children: [_jsx(\"h1\", { className: \"app-title\", children: \"React + TypeScript + Ant Design\" }), _jsxs(\"div\", { className: \"card\", children: [_jsx(UserOutlined, { className: \"icon\" }), _jsxs(\"p\", { children: [\"\\u70B9\\u51FB\\u6309\\u94AE\\u8BA1\\u6570\\uFF1A\", count] }), _jsx(Button, { type: \"primary\", onClick: increment, children: \"\\u589E\\u52A0\" })] })] }) }) }) }) })] }) }));\n};\nexport default App;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './components/App';\nimport RootStore from './stores/RootStore';\nimport { StoreProvider } from './stores/useStore';\nconst rootStore = new RootStore();\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(_jsx(React.StrictMode, { children: _jsx(StoreProvider, { value: rootStore, children: _jsx(App, {}) }) }));\n","// client/src/store/RootStore.ts\nimport { makeObservable } from 'mobx';\nclass RootStore {\n    constructor() {\n        makeObservable(this);\n        this.importStores();\n    }\n    importStores() {\n        // 这里需要一个类型断言来告诉 TypeScript require.context 的类型\n        const storeContext = require.context('.', true, /\\.store\\.(ts|js)$/);\n        storeContext.keys().forEach((key) => {\n            const storeModule = storeContext(key);\n            // 从文件名中提取 store 名称\n            const storeName = key.match(/\\.\\/(\\w+)\\.store\\.(ts|js)$/)?.[1];\n            if (storeName && storeModule.default) {\n                const StoreClass = storeModule.default;\n                this[`${storeName}Store`] = new StoreClass();\n            }\n        });\n    }\n}\nexport default RootStore;\n/**\n *\n * 代码解释\nrequire.context('.', true, /\\.store\\.(ts|js)$/)：这行代码创建了一个上下文，用于查找当前目录（store 目录）下所有以 .store.ts 或 .store.js 结尾的文件。\n第一个参数 . 表示当前目录。\n第二个参数 true 表示递归查找子目录。\n第三个参数 /\\.store\\.(ts|js)$/ 是一个正则表达式，用于匹配文件名。\nstoreContext.keys()：返回匹配到的所有文件的路径数组。\nstoreContext(key)：动态导入匹配到的文件。\nconst storeName = Object.keys(storeModule)[0]：获取导入模块的默认导出的名称。\nconst StoreClass = storeModule[storeName]：获取默认导出的类。\nthis[storeName] = new StoreClass()：创建该类的实例并挂载到 RootStore 上。\n */ \n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n// client/src/store/Page1.store.ts\nimport { makeObservable, observable, action } from 'mobx';\nclass Page1Store {\n    data = [];\n    constructor() {\n        makeObservable(this);\n    }\n    fetchData = () => {\n        // 模拟数据获取\n        this.data = [1, 2, 3];\n    };\n}\n__decorate([\n    observable,\n    __metadata(\"design:type\", Array)\n], Page1Store.prototype, \"data\", void 0);\n__decorate([\n    action,\n    __metadata(\"design:type\", Object)\n], Page1Store.prototype, \"fetchData\", void 0);\nexport default Page1Store;\n","import axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n// 假设这里有获取和设置 token、refreshToken 的函数\nconst getToken = () => localStorage.getItem('token');\nconst setToken = (token) => localStorage.setItem('token', token);\nconst getRefreshToken = () => localStorage.getItem('refreshToken');\nconst setRefreshToken = (refreshToken) => localStorage.setItem('refreshToken', refreshToken);\n// 创建 axios 实例\nconst instance = axios.create({\n    baseURL: process.env.API_BASE_URL, // 根据实际情况修改\n    timeout: 10000,\n});\n// 请求拦截器\ninstance.interceptors.request.use((config) => {\n    const token = getToken();\n    if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n}, (error) => {\n    return Promise.reject(error);\n});\n// 响应拦截器\ninstance.interceptors.response.use((response) => {\n    return response;\n}, async (error) => {\n    const originalConfig = error.config;\n    const navigate = useNavigate();\n    if (error.response) {\n        // 401 状态码处理\n        if (error.response.status === 401 && !originalConfig._retry) {\n            originalConfig._retry = true;\n            try {\n                const refreshToken = getRefreshToken();\n                if (!refreshToken) {\n                    navigate('/login');\n                    return Promise.reject(error);\n                }\n                // 发送刷新 token 请求\n                const { data } = await instance.post('/api/refresh-token', { refreshToken });\n                const newToken = data.token;\n                const newRefreshToken = data.refreshToken;\n                // 更新 token 和 refreshToken\n                setToken(newToken);\n                setRefreshToken(newRefreshToken);\n                // 重试原请求\n                originalConfig.headers.Authorization = `Bearer ${newToken}`;\n                return instance(originalConfig);\n            }\n            catch (refreshError) {\n                // 刷新 token 失败，重定向到登录页\n                navigate('/login');\n                return Promise.reject(refreshError);\n            }\n        }\n        // 403 状态码处理\n        if (error.response.status === 403) {\n            navigate('/login');\n        }\n    }\n    return Promise.reject(error);\n});\n// 封装请求方法\nconst request = {\n    get: (url, config) => {\n        return instance.get(url, config).then((response) => response.data);\n    },\n    post: (url, data, config) => {\n        return instance.post(url, data, config).then((response) => response.data);\n    },\n    put: (url, data, config) => {\n        return instance.put(url, data, config).then((response) => response.data);\n    },\n    delete: (url, config) => {\n        return instance.delete(url, config).then((response) => response.data);\n    },\n    // 文件下载\n    download: (url, config) => {\n        return instance.get(url, { ...config, responseType: 'blob' }).then((response) => {\n            const url = window.URL.createObjectURL(new Blob([response.data]));\n            const link = document.createElement('a');\n            link.href = url;\n            link.setAttribute('download', 'file'); // 根据实际情况修改文件名\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n        });\n    },\n    // 文件上传\n    upload: (url, data, config) => {\n        return instance.post(url, data, {\n            ...config,\n            headers: { 'Content-Type': 'multipart/form-data' },\n        }).then((response) => response.data);\n    },\n};\nexport default request;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n// client/src/stores/Login.store.ts\nimport { makeObservable, observable, action } from 'mobx';\nimport { login, } from \"@/service/login\";\nclass LoginStore {\n    isLoggedIn = false;\n    token = null;\n    refreshToken = null;\n    error = null;\n    constructor() {\n        makeObservable(this);\n    }\n    login = async (username, password) => {\n        try {\n            const response = await login({ username, password });\n            this.isLoggedIn = true;\n            this.token = response.token;\n            this.refreshToken = response.refreshToken;\n            this.error = null;\n            // 将 token 和 refreshToken 存储到 localStorage\n            localStorage.setItem('token', this.token);\n            localStorage.setItem('refreshToken', this.refreshToken);\n        }\n        catch (error) {\n            this.isLoggedIn = false;\n            this.token = null;\n            this.refreshToken = null;\n            this.error = '登录失败，请检查用户名和密码';\n        }\n    };\n    logout = () => {\n        this.isLoggedIn = false;\n        this.token = null;\n        this.refreshToken = null;\n        this.error = null;\n        // 从 localStorage 中移除 token 和 refreshToken\n        localStorage.removeItem('token');\n        localStorage.removeItem('refreshToken');\n    };\n}\n__decorate([\n    observable,\n    __metadata(\"design:type\", Boolean)\n], LoginStore.prototype, \"isLoggedIn\", void 0);\n__decorate([\n    observable,\n    __metadata(\"design:type\", Object)\n], LoginStore.prototype, \"token\", void 0);\n__decorate([\n    observable,\n    __metadata(\"design:type\", Object)\n], LoginStore.prototype, \"refreshToken\", void 0);\n__decorate([\n    observable,\n    __metadata(\"design:type\", Object)\n], LoginStore.prototype, \"error\", void 0);\n__decorate([\n    action,\n    __metadata(\"design:type\", Object)\n], LoginStore.prototype, \"login\", void 0);\n__decorate([\n    action,\n    __metadata(\"design:type\", Object)\n], LoginStore.prototype, \"logout\", void 0);\nexport default LoginStore;\n","import request from '@/utils/request';\n// 登录请求\nexport const login = (data) => request.post('/api/login', data);\nexport const getUserInfo = () => request.get('/api/data');\nexport const uploadFile = (formData) => request.upload('/api/upload', formData);\n","var map = {\n\t\"./Login.store.ts\": 6260,\n\t\"./Page1.store.ts\": 5316,\n\t\"stores/Login.store.ts\": 6260,\n\t\"stores/Page1.store.ts\": 5316\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 8559;"],"names":["authState","setAuthState","useState","isAuthenticated","isLoading","useEffect","token","localStorage","getItem","Content","children","navigate","location","pathname","StoreContext","createContext","StoreProvider","Provider","useStore","store","useContext","Error","Header","className","theme","mode","Item","icon","HomeOutlined","to","UserOutlined","style","padding","Footer","textAlign","isLoggedIn","login","error","LoginStore","name","initialValues","remember","onFinish","async","values","username","password","message","success","window","href","maxWidth","margin","paddingTop","rules","required","prefix","placeholder","LockOutlined","type","htmlType","width","count","setCount","path","element","onClick","prev","rootStore","constructor","this","importStores","storeContext","keys","forEach","key","storeModule","storeName","match","default","StoreClass","document","getElementById","render","value","__decorate","decorators","target","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","Page1Store","data","fetchData","Array","prototype","instance","axios","create","baseURL","timeout","interceptors","request","use","config","headers","Authorization","Promise","reject","response","originalConfig","status","_retry","refreshToken","post","newToken","newRefreshToken","setItem","setRefreshToken","refreshError","get","url","then","put","delete","download","responseType","URL","createObjectURL","Blob","link","createElement","setAttribute","body","appendChild","click","removeChild","upload","logout","removeItem","Boolean","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","code","resolve","module","exports"],"sourceRoot":""}