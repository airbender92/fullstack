(self.webpackChunkclient=self.webpackChunkclient||[]).push([[792],{5316:function(e,t,r){"use strict";r.r(t);var n=r(3675),s=function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class a{data=[];constructor(){(0,n.Gn)(this)}fetchData=()=>{this.data=[1,2,3]}}s([n.sH,o("design:type",Array)],a.prototype,"data",void 0),s([n.XI,o("design:type",Object)],a.prototype,"fetchData",void 0),t.default=a},6260:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(3675),s=r(7710),o=r(3665);const a=s.A.create({baseURL:void 0,timeout:1e4});a.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,async e=>{const t=e.config,r=(0,o.Zp)();if(e.response){if(401===e.response.status&&!t._retry){t._retry=!0;try{const s=localStorage.getItem("refreshToken");if(!s)return r("/login"),Promise.reject(e);const{data:o}=await a.post("/api/auth/refresh-token",{refreshToken:s}),l=o.token,i=o.refreshToken;return n=l,localStorage.setItem("token",n),(e=>{localStorage.setItem("refreshToken",e)})(i),t.headers.Authorization=`Bearer ${l}`,a(t)}catch(e){return r("/login"),Promise.reject(e)}}403===e.response.status&&r("/login")}var n;return Promise.reject(e)});var l={get:(e,t)=>a.get(e,t).then(e=>e.data),post:(e,t,r)=>a.post(e,t,r).then(e=>e.data),put:(e,t,r)=>a.put(e,t,r).then(e=>e.data),delete:(e,t)=>a.delete(e,t).then(e=>e.data),download:(e,t)=>a.get(e,{...t,responseType:"blob"}).then(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=t,r.setAttribute("download","file"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}),upload:(e,t,r)=>a.post(e,t,{...r,headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.data)};var i=function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class d{isLoggedIn=!1;token=null;refreshToken=null;error=null;constructor(){(0,n.Gn)(this)}login=async(e,t)=>{try{const n=await(r={username:e,password:t},l.post("/api/auth/login",r));this.isLoggedIn=!0,this.token=n.token,this.refreshToken=n.refreshToken,this.error=null,localStorage.setItem("token",this.token),localStorage.setItem("refreshToken",this.refreshToken)}catch(e){this.isLoggedIn=!1,this.token=null,this.refreshToken=null,this.error="登录失败，请检查用户名和密码"}var r};logout=()=>{this.isLoggedIn=!1,this.token=null,this.refreshToken=null,this.error=null,localStorage.removeItem("token"),localStorage.removeItem("refreshToken")}}i([n.sH,c("design:type",Boolean)],d.prototype,"isLoggedIn",void 0),i([n.sH,c("design:type",Object)],d.prototype,"token",void 0),i([n.sH,c("design:type",Object)],d.prototype,"refreshToken",void 0),i([n.sH,c("design:type",Object)],d.prototype,"error",void 0),i([n.XI,c("design:type",Object)],d.prototype,"login",void 0),i([n.XI,c("design:type",Object)],d.prototype,"logout",void 0);var u=d},7124:function(e,t,r){"use strict";var n=r(4489),s=r(4349),o=r.n(s),a=r(2181),l=r(674),i=r(5862),c=r(7097);var d=()=>{const[e,t]=(0,s.useState)({isAuthenticated:!1,isLoading:!0});return(0,s.useEffect)(()=>{const e=localStorage.getItem("token");t({isAuthenticated:null!==e,isLoading:!1})},[]),e},u=r(3665);const{Content:h}=c.A;var p=({children:e})=>{const{isAuthenticated:t,isLoading:r}=d(),o=(0,u.Zp)(),a=(0,u.zy)();return(0,s.useEffect)(()=>{r||t||"/login"===a.pathname||o("/login")},[t,r,a.pathname,o]),r?(0,n.jsx)("div",{children:"验证身份中..."}):t?(0,n.jsx)(c.A,{children:(0,n.jsx)(h,{children:t?(0,n.jsx)(u.sv,{}):null})}):null},f=r(9751);const m=(0,s.createContext)(null),g=m.Provider,x=()=>{const e=(0,s.useContext)(m);if(!e)throw new Error("useStore must be used within a StoreProvider");return e},{Content:j}=c.A;var y=(0,f.PA)(({children:e})=>{x();return(0,n.jsx)(c.A,{children:(0,n.jsxs)(j,{children:[" ",(0,n.jsx)(u.sv,{})]})})}),v=r(5791),b=r(3522);const{Header:k,Content:A,Footer:w}=c.A;var N=({children:e})=>(0,n.jsxs)(c.A,{className:"layout",children:[(0,n.jsxs)(k,{children:[(0,n.jsx)("div",{className:"logo"}),(0,n.jsxs)(v.A,{theme:"dark",mode:"horizontal",children:[(0,n.jsx)(v.A.Item,{icon:(0,n.jsx)(b.A,{}),children:(0,n.jsx)(u.N_,{to:"/",children:"首页"})},"1"),(0,n.jsx)(v.A.Item,{icon:(0,n.jsx)(i.A,{}),children:(0,n.jsx)(u.N_,{to:"/profile",children:"个人中心"})},"2")]})]}),(0,n.jsx)(A,{style:{padding:"0 50px"},children:(0,n.jsx)("div",{className:"site-layout-content",children:(0,n.jsx)(u.sv,{})})}),(0,n.jsx)(w,{style:{textAlign:"center"},children:"Ant Design ©2024 Created by Ant UED"})]}),I=r(9914),S=r(6775),O=r(8134),R=r(7920);var T=()=>{const e=x(),{isLoggedIn:t,login:r,error:s}=e.LoginStore;return(0,n.jsxs)(S.A,{name:"login",initialValues:{remember:!0},onFinish:async e=>{await r({username:e.username,password:e.password});t?(I.Ay.success("登录成功"),window.location.href="/"):I.Ay.error(s||"登录失败，请检查用户名和密码")},style:{maxWidth:300,margin:"0 auto",paddingTop:"100px"},children:[(0,n.jsx)(S.A.Item,{name:"username",rules:[{required:!0,message:"请输入用户名!"}],children:(0,n.jsx)(O.A,{prefix:(0,n.jsx)(i.A,{className:"site-form-item-icon"}),placeholder:"用户名"})}),(0,n.jsx)(S.A.Item,{name:"password",rules:[{required:!0,message:"请输入密码!"}],children:(0,n.jsx)(O.A,{prefix:(0,n.jsx)(R.A,{className:"site-form-item-icon"}),type:"password",placeholder:"密码"})}),(0,n.jsx)(S.A.Item,{children:(0,n.jsx)(l.Ay,{type:"primary",htmlType:"submit",style:{width:"100%"},children:"登录"})})]})},L=r(9261),C=(r(6718),r(7710));var P=()=>{const[e,t]=(0,s.useState)("oneYear"),[r,o]=(0,s.useState)(null),[a,l]=(0,s.useState)(!1),[i,c]=(0,s.useState)(null),d=[{value:"threeYears",label:"近三年"},{value:"oneYear",label:"近一年"},{value:"halfYear",label:"近半年"},{value:"threeMonths",label:"近3个月"},{value:"oneMonth",label:"近一个月"}];return(0,s.useEffect)(()=>{(async()=>{l(!0),c(null);try{const t=await C.A.get(`/api/lottery?timeRange=${e}`);o(t.data)}catch(e){c(e.message||"获取数据失败")}finally{l(!1)}})()},[e]),(0,n.jsxs)("div",{className:"container mx-auto p-4 bg-white rounded-lg shadow-lg",children:[(0,n.jsx)("div",{className:"mb-6 flex justify-center",children:(0,n.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:d.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})}),a&&(0,n.jsx)("div",{className:"flex justify-center items-center py-16",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),i&&(0,n.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:[(0,n.jsx)("strong",{className:"font-bold",children:"错误:"}),(0,n.jsx)("span",{className:"block sm:inline",children:i})]}),r&&(0,n.jsx)("div",{className:"h-[500px]",children:(0,n.jsx)(L.EChartsReact,{option:(()=>{if(!r)return{};const t=Object.keys(r.redBallFrequency).map(Number).sort((e,t)=>e-t),n=t.map(e=>r?.redBallFrequency[e]||0),s=Object.keys(r.blueBallFrequency).map(Number).sort((e,t)=>e-t),o=s.map(e=>r?.blueBallFrequency[e]||0);return{title:{text:`双色球号码频率统计 (${d.find(t=>t.value===e)?.label||e})`,left:"center",textStyle:{fontSize:18,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["红球","蓝球"],top:"5%",left:"center"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[...t,...s],axisLabel:{interval:0,rotate:45}}],yAxis:[{type:"value",name:"出现次数",min:0}],series:[{name:"红球",type:"bar",data:n,color:"#ff4d4f",barWidth:"40%"},{name:"蓝球",type:"bar",data:o,color:"#1890ff",barWidth:"40%"}]}})(),style:{height:"100%"}})}),(0,n.jsxs)("div",{className:"mt-6 text-gray-600 text-sm",children:[(0,n.jsx)("p",{children:"说明: 本图表展示了双色球在不同时间段内各个号码的出现频率。"}),(0,n.jsx)("p",{className:"mt-2",children:"红球范围: 01-33, 蓝球范围: 01-16"})]})]})};var q=()=>{const[e,t]=o().useState(0);return(0,n.jsx)(u.I9,{children:(0,n.jsxs)(u.BV,{children:[(0,n.jsx)(u.qh,{path:"/login",element:(0,n.jsx)(T,{})}),(0,n.jsx)(u.qh,{element:(0,n.jsx)(p,{}),children:(0,n.jsx)(u.qh,{element:(0,n.jsx)(y,{}),children:(0,n.jsxs)(u.qh,{element:(0,n.jsx)(N,{}),children:[(0,n.jsx)(u.qh,{path:"/",element:(0,n.jsxs)("div",{className:"app-container",children:[(0,n.jsx)("h1",{className:"app-title",children:"React + TypeScript + Ant Design"}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)(i.A,{className:"icon"}),(0,n.jsxs)("p",{children:["点击按钮计数：",e]}),(0,n.jsx)(l.Ay,{type:"primary",onClick:()=>{t(e=>e+1)},children:"增加"})]})]})}),(0,n.jsx)(u.qh,{path:"/lottery-chart",element:(0,n.jsx)(P,{})})]})})})]})})},E=r(3675);const B=new class{constructor(){(0,E.Gn)(this),this.importStores()}importStores(){const e=r(8559);e.keys().forEach(t=>{const r=e(t),n=t.match(/\.\/(\w+)\.store\.(ts|js)$/)?.[1];if(n&&r.default){const e=r.default;this[`${n}Store`]=new e}})}};a.createRoot(document.getElementById("root")).render((0,n.jsx)(o().StrictMode,{children:(0,n.jsx)(g,{value:B,children:(0,n.jsx)(q,{})})}))},8559:function(e,t,r){var n={"./Login.store.ts":6260,"./Page1.store.ts":5316,"stores/Login.store.ts":6260,"stores/Page1.store.ts":5316};function s(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=o,e.exports=s,s.id=8559}},function(e){e.O(0,[96,869],function(){return t=7124,e(e.s=t);var t});e.O()}]);
//# sourceMappingURL=main.73ff23b4e5478ba9d062.js.map